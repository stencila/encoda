<html>

  <head>
    <title>ipynb CodeFragment : Jupyter Notebook codec</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://unpkg.com/@stencila/thema@1/dist/themes/stencila/styles.css"
      rel="stylesheet">
    <script src="https://unpkg.com/@stencila/thema@1/dist/themes/stencila/index.js"
      type="text/javascript"></script>
    <script
      src="https://unpkg.com/@stencila/components@&lt;=1/dist/stencila-components/stencila-components.esm.js"
      type="module"></script>
    <script
      src="https://unpkg.com/@stencila/components@&lt;=1/dist/stencila-components/stencila-components.js"
      type="text/javascript"></script>
  </head>

  <body>
    <article itemscope="" itemtype="http://schema.org/Article" data-itemscope="root">
      <div itemscope="" itemtype="http://schema.org/Organization" itemprop="publisher">
        <meta itemprop="name" content="Unknown">
        <div itemscope="" itemtype="http://schema.org/ImageObject" itemprop="logo">
          <meta itemprop="url"
            content="https://via.placeholder.com/600x60/dbdbdb/4a4a4a.png?text=Unknown"
            src="https://via.placeholder.com/600x60/dbdbdb/4a4a4a.png?text=Unknown">
        </div>
      </div>
      <h1 data-itemprop="headline">
        <meta itemprop="headline" content="ipynb CodeFragment : Jupyter Notebook codec"><code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">ipynb</code>: Jupyter
        Notebook codec</h1>
      <meta itemprop="image" content="https://via.placeholder.com/1200x714/dbdbdb/4a4a4a.png?text=">
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">The <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">ipynb</code> codec is for decoding and
        encoding Jupyter Notebook&#39;s <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">nbformat</code> JSON. Jupyter Notebooks
        were formally known as IPython Notebooks, and correspondingly, usually having the <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">ipynb</code> filename
        extension.</p>
      <blockquote itemscope="" itemtype="http://schema.stenci.la/QuoteBlock">
        <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">This codec is under
          development. It requires updating to the revised schemas for <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">CodeChunk</code>s in the <a
            href="https://github.com/stencila/schema/pull/132/files" itemscope=""
            itemtype="http://schema.stenci.la/Link"><code itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">execution-engines</code> branch of
            <code itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">stencila/schema</code></a> e.g.
          addition of <code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">errors</code> property. See the TODO:s
          in the code.</p>
      </blockquote>
      <h2 itemscope="" itemtype="http://schema.stenci.la/Heading" id="typings">Typings</h2>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">This codec uses Typescript type
        definitions for <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">nbformat</code> versions <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">v3</code> and <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">v4</code> that are generated
        from the <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">nbformat</code>
        JSON schema definitions in the <a href="https://github.com/jupyter/nbformat/" itemscope=""
          itemtype="http://schema.stenci.la/Link">https://github.com/jupyter/nbformat/</a>
        repository. See <a href="nbformat.js" itemscope=""
          itemtype="http://schema.stenci.la/Link"><code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">nbformat.js</code></a> for more details.
      </p>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">These type definitions are used
        to improve type safety when encoding and decoding. We use the type names e.g. <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">MarkdownCell</code> in the
        documentation below.</p>
      <h2 itemscope="" itemtype="http://schema.stenci.la/Heading" id="decoding-5">Decoding</h2>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">Prior to decoding the contents of
        the notebook is validated against the <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">nbformat</code> JSON Schema version
        determined by the <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">nbformat</code> property of the notebook.
        All notebooks are decoded to a <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">Article</code>.</p>
      <h3 itemscope="" itemtype="http://schema.stenci.la/Heading" id="metadata">Metadata</h3>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">The only metadata specified in
        the <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">nbformat</code> JSON
        schema are <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">title</code>
        and <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">authors</code>,
        although arbitrary metadata can be added to a notebook&#39;s <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">metadata</code> property. During decoding,
        a notebook&#39;s <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">title</code> is mapped directly to the
        article&#39;s <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">title</code> property.</p>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">In <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">nbformat v4</code>, a notebook&#39;s <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">authors</code> property is an
        array of <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">any</code> type.
        Users can add an author as a string, or an object with more structured metadata on the
        author. During, decoding this codec will handle each author, based on the type of data:</p>
      <ul itemscope="" itemtype="http://schema.org/ItemList">
        <li id="1" itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
          <meta itemprop="position" content="1">
          <meta itemprop="url" content="#1">
          <p itemscope="" itemtype="http://schema.stenci.la/Paragraph"><code itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">string</code>s are decoded by the <a
              href="../person" itemscope="" itemtype="http://schema.stenci.la/Link"><code
                itemscope="" itemtype="http://schema.stenci.la/CodeFragment">person</code> codec</a>
            into a <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Person</code>
            node</p>
        </li>
        <li id="2" itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
          <meta itemprop="position" content="2">
          <meta itemprop="url" content="#2">
          <p itemscope="" itemtype="http://schema.stenci.la/Paragraph"><code itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">object</code>s are <code itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">coerce()</code>d to a <code
              itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Person</code> node</p>
        </li>
      </ul>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">This allows for some flexibility
        for users when entering metadata (e.g. using a string instead of an object, using <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">lastName</code> instead of
        <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">familyName</code>) while
        still ensuring that it is consistent with the schema.org vocabulary and Stencila schema. All
        other data in the notebook&#39;s <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">metadata</code> is stored in the
        article&#39;s <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">meta</code>
        property.</p>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">For example, the following
        notebook,</p>
      <pre itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code class="language-json" itemscope="" itemtype="http://schema.stenci.la/CodeFragment">{
  &quot;nbformat&quot;: 4,
  &quot;nbformat_minor&quot;: 4,
  &quot;metadata&quot;: {
    &quot;title&quot;: &quot;Article title&quot;,
    &quot;authors&quot;: [
      &quot;Josiah Carberry PhD (http://library.brown.edu/about/hay/carberry.php)&quot;,
      &quot;Dr Jane Carberry &lt;jane.carberry@example.org&gt;&quot;,
      {
        &quot;firstName&quot;: &quot;Janet&quot;,
        &quot;lastName&quot;: &quot;Carberry&quot;,
        &quot;affiliations&quot;: {
          &quot;type&quot;: &quot;Organization&quot;,
          &quot;name&quot;: &quot;Brown University&quot;
        },
        &quot;favoriteColour&quot;: &quot;red&quot;
      }
    ],
    &quot;arbitrary_metadata&quot;: {
      &quot;provider&quot;: &quot;Deep Thought&quot;,
      &quot;answer&quot;: 42
    }
  },
  &quot;cells&quot;: []
}</code></pre>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">is decoded to this <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Article</code> with each
        author expanded to a <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">Person</code> node,</p>
      <pre itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code class="language-json" itemscope="" itemtype="http://schema.stenci.la/CodeFragment">{
  &quot;type&quot;: &quot;Article&quot;,
  &quot;title&quot;: &quot;Article title&quot;,
  &quot;authors&quot;: [
    {
      &quot;type&quot;: &quot;Person&quot;,
      &quot;givenNames&quot;: [&quot;Josiah&quot;],
      &quot;familyNames&quot;: [&quot;Carberry&quot;],
      &quot;honorificSuffix&quot;: &quot;PhD&quot;,
      &quot;url&quot;: &quot;http://library.brown.edu/about/hay/carberry.php&quot;
    },
    {
      &quot;type&quot;: &quot;Person&quot;,
      &quot;honorificPrefix&quot;: &quot;Dr&quot;,
      &quot;givenNames&quot;: [&quot;Jane&quot;],
      &quot;familyNames&quot;: [&quot;Carberry&quot;],
      &quot;emails&quot;: [&quot;jane.carberry@example.org&quot;]
    },
    {
      &quot;type&quot;: &quot;Person&quot;,
      &quot;affiliations&quot;: [
        {
          &quot;type&quot;: &quot;Organization&quot;,
          &quot;name&quot;: &quot;Brown University&quot;
        }
      ],
      &quot;familyNames&quot;: [&quot;Carberry&quot;],
      &quot;givenNames&quot;: [&quot;Janet&quot;]
    }
  ],
  &quot;meta&quot;: {
    &quot;arbitrary_metadata&quot;: {
      &quot;provider&quot;: &quot;Deep Thought&quot;,
      &quot;answer&quot;: 42
    }
  },
  &quot;content&quot;: []
}</code></pre>
      <h3 itemscope="" itemtype="http://schema.stenci.la/Heading" id="cells">Cells</h3>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">The main content of a Jupyter
        Notebooks is in the <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">cells</code> array. These cells are of
        different types, the most commonly used types being <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">MarkdownCell</code> and <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">CodeCell</code>. All cells are decoded to
        nodes of type <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">BlockContent</code> in the <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">content</code> property of
        the <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Article</code>.</p>
      <h4 itemscope="" itemtype="http://schema.stenci.la/Heading"
        id="markdowncell-codefragment-etc"><code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">MarkdownCell</code> etc</h4>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph"><code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">MarkdownCell</code>s are decoding to an
        array of <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">BlockContent</code> nodes e.g. <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Heading</code>, <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Paragraph</code> etc. This is
        done by simply delegating to the <a href="../md" itemscope=""
          itemtype="http://schema.stenci.la/Link"><code itemscope=""
            itemtype="http://schema.stenci.la/CodeFragment">md</code> codec</a>; see there for more
        details on the Markdown syntax supported. At present, there is no special handling of the
        Markdown content, although that could be added if there was a need to handle Markdown syntax
        that was common in Jupyter Notebooks (e.g. variable interpolation using double braces <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">{{}}</code>).</p>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">In <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">v3</code> of the Jupyter Notebook format
        there are also cells of type <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">HeadingCell</code>, and of type <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">MarkdownCell</code> with
        <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">cell_type</code> set to
        <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">html</code>. These are
        decoded in a similar way to standard <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">MarkdownCells</code> - by delegating to
        the <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">md</code> and <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">html</code> codecs
        respectively to decode them into <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">BlockContent</code> nodes.</p>
      <h4 itemscope="" itemtype="http://schema.stenci.la/Heading" id="codecell-codefragment"><code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">CodeCell</code></h4>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph"><code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">CodeCell</code>s are decoded to a <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">CodeChunk</code>. The
        cell&#39;s <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">source</code>
        (<code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">input</code> in <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">nbformat v3</code>) simply
        becomes the chunk&#39;s <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">text</code>. Properties of a cell that are
        not directly translatable e.g. <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">execution_count</code>, and any other data
        in the cell&#39;s <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">metadata</code>, are placed in the
        chunk&#39;s <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">meta</code>
        property.</p><span itemscope="" itemtype="http://schema.stenci.la/Array">['{ "cell_type":
        "code", "execution_count": 3, "metadata": {}, "source": [ "df.head()" ], "outputs": [ {
        "data": { "output_type": "execute_result", "text/html": [ "','\\n", "\\n", " \\n", " \\n", "
        \\n", " \\n", " \\n", " \\n", " \\n", " \\n", " \\n", " \\n", " \\n", " \\n", " \\n", "
        \\n",{ "type": "CodeChunk", "meta": { "execution_count": 3 }, "text": "df.head()",
        "outputs": [ { "type": "Table", "rows": [ { "type": "TableRow", "cells": [{ "cell_type":
        "code", "execution_count": 7, "metadata": {}, "source": [ "df.plot(x=\'YEAR\',
        y=\'SUNACTIVITY\', xlim=(1700,2008))" ], "outputs": [ { "output_type": "execute_result",
        "data": { "text/plain": [
        "',{rows:[{cells:[],type:'TableRow'},{cells:[{content:[{type:'Strong',content:['0']}],type:'TableCell'},{content:['
        1700'],type:'TableCell'},{content:['
        5'],type:'TableCell'}],type:'TableRow'},{cells:[],type:'TableRow'}],type:'Table'}]</span>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">The decoding of a <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">CodeCell</code>&#39;s <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">outputs</code> is a little
        more involved. In both <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">v3</code> and <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">v4</code> of <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">nbformat</code> this is an array of
        outputs of different types. The type names differ by schema version. In <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">v4</code>, they are <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">ExecuteResult</code>, <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">DisplayData</code>, <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">Stream</code> and <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">Error</code>.</p>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph"><code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">ExecuteResult</code> and <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">DisplayData</code> outputs
        have a <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">MimeBundle</code>
        which provides the output of the code cell as one or more media types. The <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">ipynb</code> codec attempts
        to decode the raw content of a <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">MimeBundle</code> into a semantic <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Node</code> in the Stencila
        schema. This allows outputs to be used in other code chunks, or encoded in other formats.
      </p>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">For instance, if a cell outputs a
        HTML table then it will be decoded to a <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">Table</code> node, which could then later
        be encoded as a table in Markdown, Microsoft Word or JATS. For example, this <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">CodeCell</code> which outputs
        the head of a Pandas data frame as HTML,</p>
      <pre itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code class="language-json" itemscope="" itemtype="http://schema.stenci.la/CodeFragment">{
  &quot;cell_type&quot;: &quot;code&quot;,
  &quot;execution_count&quot;: 3,
  &quot;metadata&quot;: {},
  &quot;source&quot;: [
    &quot;df.head()&quot;
  ],
  &quot;outputs&quot;: [
    {
      &quot;data&quot;: {
        &quot;output_type&quot;: &quot;execute_result&quot;,
        &quot;text/html&quot;: [
          &quot;&lt;div style=\&quot;max-height:1000px;max-width:1500px;overflow:auto;\&quot;&gt;\n&quot;,
          &quot;&lt;table border=\&quot;1\&quot; class=\&quot;dataframe\&quot;&gt;\n&quot;,
          &quot;  &lt;thead&gt;\n&quot;,
          &quot;    &lt;tr style=\&quot;text-align: right;\&quot;&gt;\n&quot;,
          &quot;      &lt;th&gt;&lt;/th&gt;\n&quot;,
          &quot;      &lt;th&gt;YEAR&lt;/th&gt;\n&quot;,
          &quot;      &lt;th&gt;SUNACTIVITY&lt;/th&gt;\n&quot;,
          &quot;    &lt;/tr&gt;\n&quot;,
          &quot;  &lt;/thead&gt;\n&quot;,
          &quot;  &lt;tbody&gt;\n&quot;,
          &quot;    &lt;tr&gt;\n&quot;,
          &quot;      &lt;td&gt;&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;\n&quot;,
          &quot;      &lt;td&gt; 1700&lt;/td&gt;\n&quot;,
          &quot;      &lt;td&gt;  5&lt;/td&gt;\n&quot;,
          &quot;    &lt;/tr&gt;\n&quot;,
          &quot;    &lt;tr&gt;\n&quot;,</code></pre>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">is decoded into a <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">CodeChunk</code> with a <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Table</code> as output,</p>
      <pre itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code class="language-json" itemscope="" itemtype="http://schema.stenci.la/CodeFragment">{
  &quot;type&quot;: &quot;CodeChunk&quot;,
  &quot;meta&quot;: {
    &quot;execution_count&quot;: 3
  },
  &quot;text&quot;: &quot;df.head()&quot;,
  &quot;outputs&quot;: [
    {
      &quot;type&quot;: &quot;Table&quot;,
      &quot;rows&quot;: [
        {
          &quot;type&quot;: &quot;TableRow&quot;,
          &quot;cells&quot;: [</code></pre>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">For image media types (e.g. <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">image/png</code>), the
        content is decoded to an <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">ImageObject</code>. The Python library
        <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">matplotlib</code> is
        often used in Jupyter Notebooks. When using <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">matplotlib</code>, there is usually text
        output like <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">&lt;matplotlib.axes.AxesSubplot at
          0xada0550&gt;</code> as an <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">ExecuteResult</code> alongside the <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">DisplayData</code> containing
        the actual image. This output is treated as an artifact and is not decoded into a Stencila
        <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Node</code>. For example,
        this Jupyter Notebook <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">CodeCell</code>,</p>
      <pre itemscope=""
        itemtype="http://schema.stenci.la/CodeBlock"><code class="language-json" itemscope="" itemtype="http://schema.stenci.la/CodeFragment">{
  &quot;cell_type&quot;: &quot;code&quot;,
  &quot;execution_count&quot;: 7,
  &quot;metadata&quot;: {},
  &quot;source&quot;: [
    &quot;df.plot(x=&#39;YEAR&#39;, y=&#39;SUNACTIVITY&#39;, xlim=(1700,2008))&quot;
  ],
  &quot;outputs&quot;: [
  {
    &quot;output_type&quot;: &quot;execute_result&quot;,
    &quot;data&quot;: {
      &quot;text/plain&quot;: [
        &quot;&lt;matplotlib.axes.AxesSubplot at 0xada0550&gt;&quot;
      ]
    },
    &quot;execution_count&quot;: 7,
    &quot;metadata&quot;: {},
  },
  {
    &quot;output_type&quot;: &quot;display_data&quot;,
    &quot;data&quot;: {
      &quot;image/png&quot;: &quot;iVBORw0KGgoAAAANSUhEUgAAAXYAAAEKCAYAAAAGvn7fAAAABH...&quot;</code></pre>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">is decoded into this Stencila
        <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">CodeChunk</code> without
        the <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">matplotlib</code>
        text output:</p>
      <pre itemscope="" itemtype="http://schema.stenci.la/CodeBlock"><code class="language-json" itemscope="" itemtype="http://schema.stenci.la/CodeFragment">{
  &quot;type&quot;: &quot;CodeChunk&quot;,
  &quot;meta&quot;: {
    &quot;execution_count&quot;: 7
  },
  &quot;text&quot;: &quot;df.plot(x=&#39;YEAR&#39;, y=&#39;SUNACTIVITY&#39;, xlim=(1700,2008))&quot;,
  &quot;outputs&quot;: [
    {
      &quot;type&quot;: &quot;ImageObject&quot;,
      &quot;format&quot;: &quot;image/png&quot;,
      &quot;contentUrl&quot;: &quot;/tmp/ffbd2b7cdabce95b01e1f41834f90604.png&quot;
    }
  ]
}</code></pre>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">The decoding of all other media
        types is delegated to other codecs by matching against their registered <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">mediaTypes</code> e.g. <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">text/html</code> is decoded by the <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">html</code> codec. For
        example, for <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">text/plain</code>, the <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">txt</code> codec is used which will decode
        to text to <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">null</code>,
        <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">boolean</code> and <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">number</code> nodes if
        possible.</p>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">For <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">Stream</code> outputs, the output <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">text</code> is simply decoded
        to a <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">string</code> node.
      </p>
      <h2 itemscope="" itemtype="http://schema.stenci.la/Heading" id="encoding-5">Encoding</h2>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">When encoding a Stencila <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Node</code> to a Jupyter
        Notebook, if it is not an <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">Article</code>, then it is wrapped as
        necessary into an <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">Article</code>. Encoding then proceeds as
        pretty much the inverse of decoding.</p>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">The area with the most asymetry
        between decoding and encoding, and the area with the greatest loss during round trip
        conversion, is <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">CodeCell</code> <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">outputs</code>. As explained above, this
        codec aims to infer a semantic node type from a <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">MimeBundle</code> (e.g. a <code
          itemscope="" itemtype="http://schema.stenci.la/CodeFragment">Table</code> from HTML) and
        ignores some content (e.g. <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">matplotlib</code> console output). There
        is no attempt to store either the raw content or the media types. Therefore, during
        encoding,</p>
      <ul itemscope="" itemtype="http://schema.org/ItemList">
        <li id="1" itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
          <meta itemprop="position" content="1">
          <meta itemprop="url" content="#1">
          <p itemscope="" itemtype="http://schema.stenci.la/Paragraph"><code itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">string</code> nodes are encoded as the
            <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">text</code> property
            of <code itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">StreamOutput</code></p>
        </li>
        <li id="2" itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
          <meta itemprop="position" content="2">
          <meta itemprop="url" content="#2">
          <p itemscope="" itemtype="http://schema.stenci.la/Paragraph"><code itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">ImageObject</code> nodes are encoded
            as <code itemscope="" itemtype="http://schema.stenci.la/CodeFragment">DisplayData</code>
            outputs</p>
        </li>
        <li id="3" itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
          <meta itemprop="position" content="3">
          <meta itemprop="url" content="#3">
          <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">all other nodes are encoded
            as <code itemscope=""
              itemtype="http://schema.stenci.la/CodeFragment">ExecuteResult</code> outputs.</p>
        </li>
      </ul>
      <p itemscope="" itemtype="http://schema.stenci.la/Paragraph">After encoding, the contents of
        the generated notebook is validated against the <code itemscope=""
          itemtype="http://schema.stenci.la/CodeFragment">nbformat v4</code> JSON Schema.</p>
    </article>
  </body>

</html>